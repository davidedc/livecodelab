<!doctype html>

<!-- Documentation generated by [CoffeeDoc](http://github.com/omarkhan/coffeedoc) -->

<html>
<head>
  <title>CoffeeDoc | animation-loop.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" media="all" href="../../../../resources/base.css" />
</head>
<body>
  <header>
    <h1>animation-loop.coffee</h1>
  </header>
  <div class="container">
    <div class="sidebar column">
      
      <h4>Classes</h4>
      <ul class="classlist">
        
        <li><a href="#AnimationLoop">AnimationLoop</a></li>
        
      </ul>
      
      
    </div>
    <div class="content column">
      
      <div id="module-docstring">
        <p>The animation loop is the loop that make each &quot;frame&quot; happen,
i.e. whatever happend every 30 to 60 times (or, indeed, &quot;frames&quot;)
per second - which is the following:
<em> the next frame is scheduled
</em> the current program (i.e. a draw() Function) is run
<em> the background is repainted if it has changed from the previous frame
</em> the new 3d scene is painted
* the stats widget on the top right is updated to show
  milliseconds taken by each loop frame.</p>
<h1>#</h1>
<p>Note that the followings are NOT done as part of the animation loop:
<em> Syntax checking of the program typed by the user
  (that&#39;s checked only when it changed)
</em> sound playing. That happens by its own series of timeouts
  (as defined by the optional &quot;bpm&quot; command) separately from the
  animation loop.
* blinking of the cursor</p>
<h1>#</h1>
<p>About the current Function being run:
note that this might not be the Function corresponding to the very latest
content of the editor, for two reasons:
1. the newest content of the editor might not be syntactically incorrect
2. even if it&#39;s syntactically correct it might not be &quot;stable&quot;
   i.e. it might have thrown a runtime error
   (for example used an undefined variable or function).</p>
<h1>#</h1>
<p>Rather, the current draw() function is the latest program
that is both syntactically correct and &quot;stable&quot; (or in the process of
being proven stable).
Stability of a program cannot be guaranteed, but LiveCodeLab heuristically
considers as &quot;stable&quot; a program once it&#39;s able to run for 5 frames
without throwing errors.
If the program throws an error past this testing window, then LiveCodeLab
currently has no further fallback, so the Function will be just run each
frame and hope is that it has time to draw enough animation on the screen
before it throws the error so that some kind of animation
will still be playing.
One could devise a mechanism by which a stack of stable functions
is maintained, so each failing function of the stack would cause the
previous one to become the current stable alternative.
This would practically guarantee that there is a Function that
is simple enough in the past that it would contain no runtime
errors - unless a previous function has so dramatically borked the
state of the entire system, but that would probably take some malice.</p>

      </div>
      
      
      <div id="classes">
        <h2>Classes</h2>
        
        <div class="class">
          <div class="header">
            <a id="AnimationLoop"><h3>AnimationLoop</h3></a>
            
          </div>
          <div class="class-content">
            
            <div class="methods">
              
              
              <div class="instancemethods">
                <h3>Instance Methods</h3>
                
                <div class="method">
                  <h4>constructor(@eventRouter, @stats, @liveCodeLabCoreInstance, @forceUseOfTimeoutForScheduling)</h4>
                  
                </div>
                
                <div class="method">
                  <h4>scheduleNextFrame()</h4>
                  
                </div>
                
                <div class="method">
                  <h4>animate()</h4>
                  
                </div>
                
              </div>
              
              
            </div>
          </div>
        </div>
        
      </div>
      
      
    </div>
  </div>
</body>
</html>
