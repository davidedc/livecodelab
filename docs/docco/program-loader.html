<!DOCTYPE html>  <html> <head>   <title>program-loader.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="animation-loop.html">                 animation-loop.coffee               </a>                                           <a class="source" href="autocoder.html">                 autocoder.coffee               </a>                                           <a class="source" href="lexer.html">                 lexer.coffee               </a>                                           <a class="source" href="background-painter.html">                 background-painter.coffee               </a>                                           <a class="source" href="big-cursor.html">                 big-cursor.coffee               </a>                                           <a class="source" href="blend-controls.html">                 blend-controls.coffee               </a>                                           <a class="source" href="code-transformer.html">                 code-transformer.coffee               </a>                                           <a class="source" href="colour-functions.html">                 colour-functions.coffee               </a>                                           <a class="source" href="colour-literals.html">                 colour-literals.coffee               </a>                                           <a class="source" href="editor.html">                 editor.coffee               </a>                                           <a class="source" href="event-router.html">                 event-router.coffee               </a>                                           <a class="source" href="globals.html">                 globals.coffee               </a>                                           <a class="source" href="graphics-commands.html">                 graphics-commands.coffee               </a>                                           <a class="source" href="init.html">                 init.coffee               </a>                                           <a class="source" href="lights-commands.html">                 lights-commands.coffee               </a>                                           <a class="source" href="livecodelab-core.html">                 livecodelab-core.coffee               </a>                                           <a class="source" href="math.html">                 math.coffee               </a>                                           <a class="source" href="matrix-commands.html">                 matrix-commands.coffee               </a>                                           <a class="source" href="parser.html">                 parser.coffee               </a>                                           <a class="source" href="program-loader.html">                 program-loader.coffee               </a>                                           <a class="source" href="program-runner.html">                 program-runner.coffee               </a>                                           <a class="source" href="renderer.html">                 renderer.coffee               </a>                                           <a class="source" href="samplebank.html">                 samplebank.coffee               </a>                                           <a class="source" href="sound-system.html">                 sound-system.coffee               </a>                                           <a class="source" href="text-dimming.html">                 text-dimming.coffee               </a>                                           <a class="source" href="threejs-system.html">                 threejs-system.coffee               </a>                                           <a class="source" href="time-keeper.html">                 time-keeper.coffee               </a>                                           <a class="source" href="ui.html">                 ui.coffee               </a>                                           <a class="source" href="url-router.html">                 url-router.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               program-loader.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>ProgramLoader takes care of managing the URL and editor content
when the user navigates through demos and examples - either by
selecting menu entries, or by clicking back/forward arrow, or by
landing on a URL with a hashtag.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">ProgramLoader</span>

  <span class="nv">constructor: </span><span class="nf">(@eventRouter, @texteditor, @liveCodeLabCoreInstance) -&gt;</span>
    <span class="vi">@lastHash = </span><span class="s">&quot;&quot;</span>
    <span class="nv">userWarnedAboutWebglExamples = </span><span class="kc">false</span>
    <span class="vi">@programs =</span>
      <span class="nv">demos: </span><span class="p">{}</span>
      <span class="nv">tutorials: </span><span class="p">{}</span>
    <span class="nx">setInterval</span><span class="p">(</span>
      <span class="p">()</span><span class="o">=&gt;</span>
        <span class="nx">@pollHash</span><span class="p">()</span>
      <span class="p">,</span> <span class="mi">100</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Setup Event Listeners</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">eventRouter</span><span class="p">.</span><span class="nx">bind</span> <span class="s">&quot;url-hash-changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nf">(hash) =&gt;</span>
      <span class="nx">@loadAppropriateDemoOrTutorialBasedOnHash</span> <span class="nx">hash</span>
    <span class="p">),</span> <span class="nx">@</span>
    
    <span class="vi">@programs.demos.roseDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Rose&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">                // &#39;B rose&#39; by Guy John (@rumblesan)</span>
<span class="s">                // Mozilla Festival 2012</span>
<span class="s">                // adapted from &#39;A rose&#39; by Lib4tech</span>
<span class="s">                </span>
<span class="s">                doOnce -&gt; frame = 0</span>
<span class="s">                background red</span>
<span class="s">                scale 1.5</span>
<span class="s">                animationStyle paintOver</span>
<span class="s">                rotate frame/100</span>
<span class="s">                fill 255-((frame/2)%255),0,0</span>
<span class="s">                stroke 255-((frame/2)%255),0,0</span>
<span class="s">                scale 1-((frame/2)%255) / 255</span>
<span class="s">                box</span>
<span class="s">                &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
    
    <span class="vi">@programs.demos.cheeseAndOlivesDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Cheese and olives&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // &#39;Cheese and olives&#39; by</span>
<span class="s">            // Davina Tirvengadum</span>
<span class="s">            // Mozilla festival 2012</span>
<span class="s">            </span>
<span class="s">            background white</span>
<span class="s">            scale .3</span>
<span class="s">            move 0,-1</span>
<span class="s">            fill yellow</span>
<span class="s">            stroke black</span>
<span class="s">            rotate</span>
<span class="s">            strokeSize 3</span>
<span class="s">            line 4</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            rotate 2,3</span>
<span class="s">            move 0,3</span>
<span class="s">            scale .3</span>
<span class="s">            fill black</span>
<span class="s">            stroke black</span>
<span class="s">            ball</span>
<span class="s">            </span>
<span class="s">            rotate 3</span>
<span class="s">            move 5</span>
<span class="s">            scale 1</span>
<span class="s">            fill green</span>
<span class="s">            stroke green</span>
<span class="s">            ball</span>
<span class="s">            </span>
<span class="s">            rotate 1</span>
<span class="s">            move -3</span>
<span class="s">            scale 1</span>
<span class="s">            fill yellow</span>
<span class="s">            stroke yellow</span>
<span class="s">            ball</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.simpleCubeDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Simple cube&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // there you go!</span>
<span class="s">            // a simple cube!</span>
<span class="s">            </span>
<span class="s">            background yellow</span>
<span class="s">            rotate 0,time/2000,time/2000</span>
<span class="s">            box</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.webgltwocubesDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;WebGL&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;WebGL: Two cubes&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            background 155,255,255</span>
<span class="s">            2 times -&gt;</span>
<span class="s">            ▶rotate 0, 1, time/2000</span>
<span class="s">            ▶box</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.cubesAndSpikes =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Cubes and spikes&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            simpleGradient fuchsia,color(100,200,200),yellow</span>
<span class="s">            scale 2.1</span>
<span class="s">            5 times -&gt;</span>
<span class="s">            ▶rotate 0,1,time/5000</span>
<span class="s">            ▶box 0.1,0.1,0.1</span>
<span class="s">            ▶move 0,0.1,0.1</span>
<span class="s">            ▶3 times -&gt;</span>
<span class="s">            ▶▶rotate 0,1,1</span>
<span class="s">            ▶▶box 0.01,0.01,1</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.webglturbineDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;WebGL&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;WebGL: Turbine&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            background 155,55,255</span>
<span class="s">            70 times -&gt;</span>
<span class="s">            ▶rotate time/100000,1,time/100000</span>
<span class="s">            ▶box</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.webglzfightartDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;WebGL&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;WebGL: Z-fight!&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // Explore the artifacts</span>
<span class="s">            // of your GPU!</span>
<span class="s">            // Go Z-fighting, go!</span>
<span class="s">            scale 5</span>
<span class="s">            rotate</span>
<span class="s">            fill red</span>
<span class="s">            box</span>
<span class="s">            rotate 0.000001</span>
<span class="s">            fill yellow</span>
<span class="s">            box</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.littleSpiralOfCubes =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Little spiral&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            background orange</span>
<span class="s">            scale 0.1</span>
<span class="s">            10 times -&gt;</span>
<span class="s">            ▶rotate 0,1,time/1000</span>
<span class="s">            ▶move 1,1,1</span>
<span class="s">            ▶box</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.tentacleDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Tentacle&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            background 155,255,155</span>
<span class="s">            scale 0.15</span>
<span class="s">            3 times -&gt;</span>
<span class="s">            ▶rotate 0,1,1</span>
<span class="s">            ▶10 times -&gt;</span>
<span class="s">            ▶▶rotate 0,1,time/1000</span>
<span class="s">            ▶▶scale 0.9</span>
<span class="s">            ▶▶move 1,1,1</span>
<span class="s">            ▶▶box</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.lampDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Lamp&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            animationStyle motionBlur</span>
<span class="s">            simpleGradient red,yellow,color(255,0,255)</span>
<span class="s">            //animationStyle paintOver</span>
<span class="s">            scale 2</span>
<span class="s">            rotate time/4000, time/4000,  time/4000</span>
<span class="s">            90 times -&gt;</span>
<span class="s">            ▶rotate time/200000, time/200000,  time/200000</span>
<span class="s">            ▶line</span>
<span class="s">            ▶move 0.5,0,0</span>
<span class="s">            ▶line</span>
<span class="s">            ▶move -0.5,0,0</span>
<span class="s">            ▶line</span>
<span class="s">            ▶line</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.trillionfeathersDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;A trillion feathers&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            animationStyle paintOver</span>
<span class="s">            move 2,0,0</span>
<span class="s">            scale 2</span>
<span class="s">            rotate</span>
<span class="s">            20 times -&gt;</span>
<span class="s">            ▶rotate</span>
<span class="s">            ▶move 0.25,0,0</span>
<span class="s">            ▶line</span>
<span class="s">            ▶move -0.5,0,0</span>
<span class="s">            ▶line</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.monsterblobDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Monster blob&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            ballDetail 6</span>
<span class="s">            animationStyle motionBlur</span>
<span class="s">            rotate time/5000</span>
<span class="s">            simpleGradient fuchsia,aqua,yellow</span>
<span class="s">            5 times -&gt;</span>
<span class="s">            ▶rotate 0,1,time/5000</span>
<span class="s">            ▶move 0.2,0,0</span>
<span class="s">            ▶3 times -&gt;</span>
<span class="s">            ▶▶rotate 1</span>
<span class="s">            ▶▶ball -1</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.industrialMusicDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Sound&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Sound: Industrial&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            bpm 88</span>
<span class="s">            play &#39;alienBeep&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            play &#39;beepC&#39;  ,&#39;zxzz zzzz xzzx xxxz&#39;</span>
<span class="s">            play &#39;beepA&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            play &#39;lowFlash&#39;  ,&#39;zzxz zzzz zzzz zzzz&#39;</span>
<span class="s">            play &#39;beepB&#39;  ,&#39;xzzx zzzz zxzz zxzz&#39;</span>
<span class="s">            play &#39;voltage&#39;  ,&#39;xzxz zxzz xzxx xzxx&#39;</span>
<span class="s">            play &#39;tranceKick&#39;  ,&#39;zxzx zzzx xzzz zzxx&#39;</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.trySoundsDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Sound&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Sound: Try them all&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            bpm 88</span>
<span class="s">            // leave this one as base</span>
<span class="s">            play &#39;tranceKick&#39;  ,&#39;zxzx zzzx xzzz zzxx&#39;</span>
<span class="s">            </span>
<span class="s">            // uncomment the sounds you want to try</span>
<span class="s">            //play &#39;toc&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;highHatClosed&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;highHatOpen&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;toc2&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;toc3&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;toc4&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;snare&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;snare2&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;china&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;crash&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;crash2&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;crash3&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;ride&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;glass&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;glass1&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;glass2&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;glass3&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;thump&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;lowFlash&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;lowFlash2&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;tranceKick2&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;tranceKick&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;wosh&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;voltage&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;beepA&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;beepB&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;beepC&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;beepD&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;beep&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;hello&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            //play &#39;alienBeep&#39;  ,&#39;zzxz zzzz zzxz zzzz&#39;</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.springysquaresDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Springy squares&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            animationStyle motionBlur</span>
<span class="s">            simpleGradient fuchsia,color(100,200,200),yellow</span>
<span class="s">            scale 0.3</span>
<span class="s">            3 times -&gt;</span>
<span class="s">            ▶move 0,0,0.5</span>
<span class="s">            ▶5 times -&gt;</span>
<span class="s">            ▶▶rotate time/2000</span>
<span class="s">            ▶▶move 0.7,0,0</span>
<span class="s">            ▶▶rect</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.diceDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Basic&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;Dice&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            animationStyle motionBlur</span>
<span class="s">            simpleGradient color(255),moccasin,peachpuff</span>
<span class="s">            stroke 255,100,100,255</span>
<span class="s">            fill red,155</span>
<span class="s">            move -0.5,0,0</span>
<span class="s">            scale 0.3</span>
<span class="s">            3 times -&gt;</span>
<span class="s">            ▶move 0,0,0.5</span>
<span class="s">            ▶1 times -&gt;</span>
<span class="s">            ▶▶rotate time/1000</span>
<span class="s">            ▶▶move 2,0,0</span>
<span class="s">            ▶▶box</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.webglalmostvoronoiDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;WebGL&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;WebGL: Almost Voronoi&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            scale 10</span>
<span class="s">            2 times -&gt;</span>
<span class="s">            ▶rotate 0,1,time/10000</span>
<span class="s">            ▶ball -1</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>

    <span class="vi">@programs.demos.webglshardsDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;WebGL&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;WebGL: Shards&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            scale 10</span>
<span class="s">            fill 0</span>
<span class="s">            strokeSize 7</span>
<span class="s">            5 times -&gt;</span>
<span class="s">            ▶rotate 0,1,time/20000</span>
<span class="s">            ▶ball</span>
<span class="s">            ▶rotate 0,1,1</span>
<span class="s">            ▶ball -1.01</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.webglredthreadsDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;WebGL&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;WebGL: Red threads&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            scale 10.5</span>
<span class="s">            background black</span>
<span class="s">            stroke red</span>
<span class="s">            noFill</span>
<span class="s">            strokeSize 7</span>
<span class="s">            5 times -&gt;</span>
<span class="s">            ▶rotate time/20000</span>
<span class="s">            ▶ball</span>
<span class="s">            ▶rotate 0,1,1</span>
<span class="s">            ▶ball</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.demos.webglnuclearOctopusDemo =</span>
      <span class="nv">submenu: </span><span class="s">&quot;WebGL&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;WebGL: Nuclear octopus&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            simpleGradient black,color(0,0,(time/5)%255),black</span>
<span class="s">            scale 0.2</span>
<span class="s">            move 5,0,0</span>
<span class="s">            animationStyle motionBlur</span>
<span class="s">            //animationStyle paintOver</span>
<span class="s">            stroke 255,0,0,120</span>
<span class="s">            fill time%255,0,0</span>
<span class="s">            pushMatrix</span>
<span class="s">            count = 0</span>
<span class="s">            3 times -&gt;</span>
<span class="s">            ▶count++</span>
<span class="s">            ▶pushMatrix</span>
<span class="s">            ▶rotate count+3+time/1000,2+count + time/1000,4+count</span>
<span class="s">            ▶120 times -&gt;</span>
<span class="s">            ▶▶scale 0.9</span>
<span class="s">            ▶▶move 1,1,0</span>
<span class="s">            ▶▶rotate time/100</span>
<span class="s">            ▶▶box</span>
<span class="s">            ▶popMatrix</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.introTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Intro&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;intro&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // Lines beginning with two</span>
<span class="s">            // slashes (like these) are just comments.</span>
<span class="s">            </span>
<span class="s">            // Everything else is run</span>
<span class="s">            // about 30 to 60 times per second</span>
<span class="s">            // in order to create an animation.</span>
<span class="s">            </span>
<span class="s">            // Click the link below to start the tutorial.</span>
<span class="s">            </span>
<span class="s">            // next-tutorial:hello_world</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.helloworldTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Intro&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;hello world&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // type these three letters</span>
<span class="s">            // in one of these empty lines below:</span>
<span class="s">            // &#39;b&#39; and &#39;o&#39; and &#39;x&#39;</span>
<span class="s">            </span>
<span class="s">            </span>
<span class="s">            </span>
<span class="s">            // (you should then see a box facing you)</span>
<span class="s">            // click below for the next tutorial</span>
<span class="s">            // next-tutorial:some_notes</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.somenotesTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Intro&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;some notes&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // If this makes sense to you:</span>
<span class="s">            // the syntax is similar to Coffeescript</span>
<span class="s">            // and the commands are almost</span>
<span class="s">            // like Processing.</span>
<span class="s">            </span>
<span class="s">            // If this doesn&#39;t make sense to you</span>
<span class="s">            // don&#39;t worry.</span>
<span class="s">            </span>
<span class="s">            // next-tutorial:rotate</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.rotateTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Intro&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;a taste of animation&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // now that we have a box</span>
<span class="s">            // let&#39;s rotate it:</span>
<span class="s">            // type &#39;rotate 1&#39; in the</span>
<span class="s">            // line before the &#39;box&#39;</span>
<span class="s">            </span>
<span class="s">            </span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // click for the next tutorial:</span>
<span class="s">            // next-tutorial:frame</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.frameTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Animation&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;frame&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // make the box spin</span>
<span class="s">            // by replacing &#39;1&#39; with &#39;frame&#39;</span>
<span class="s">            </span>
<span class="s">            rotate 1</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // &#39;frame&#39; contains a number</span>
<span class="s">            // always incrementing as</span>
<span class="s">            // the screen is re-drawn.</span>
<span class="s">            // (use &#39;frame/100&#39; to slow it down)</span>
<span class="s">            // next-tutorial:time</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.timeTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Animation&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;time&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // &#39;frame/100&#39; has one problem:</span>
<span class="s">            // faster computers will make</span>
<span class="s">            // the cube spin too fast.</span>
<span class="s">            // Replace it with &#39;time/2000&#39;.</span>
<span class="s">            </span>
<span class="s">            rotate frame/100</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // &#39;time&#39; counts the</span>
<span class="s">            // number of milliseconds since</span>
<span class="s">            // the program started, so it&#39;s</span>
<span class="s">            // independent of how fast</span>
<span class="s">            // the computer is at drawing.</span>
<span class="s">            // next-tutorial:move</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.moveTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Placing things&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;move&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // you can move any object</span>
<span class="s">            // by using &#39;move&#39;</span>
<span class="s">            </span>
<span class="s">            box</span>
<span class="s">            move 1,1,0</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // try to use a rotate before</span>
<span class="s">            // the first box to see how the</span>
<span class="s">            // scene changes.</span>
<span class="s">            // next-tutorial:scale</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.scaleTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Placing things&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;scale&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // you can make an object bigger</span>
<span class="s">            // or smaller by using &#39;scale&#39;</span>
<span class="s">            </span>
<span class="s">            rotate 3</span>
<span class="s">            box</span>
<span class="s">            move 1</span>
<span class="s">            scale 2</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // try to use scale or move before</span>
<span class="s">            // the first box to see how the</span>
<span class="s">            // scene changes.</span>
<span class="s">            // next-tutorial:times</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.timesTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Repeating stuff&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;times&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // &#39;times&#39; (not to be confused with</span>
<span class="s">            // &#39;time&#39;!) can be used to</span>
<span class="s">            // repeat operations like so:</span>
<span class="s">            </span>
<span class="s">            rotate 1</span>
<span class="s">            3 times -&gt;</span>
<span class="s">            ▶move 0.2,0.2,0.2</span>
<span class="s">            ▶box</span>
<span class="s">            </span>
<span class="s">            // note how the tabs indicate</span>
<span class="s">            // exactly the block of code</span>
<span class="s">            // to be repeated.</span>
<span class="s">            // next-tutorial:fill</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.fillTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Graphics&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;fill&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // &#39;fill&#39; changes the</span>
<span class="s">            // color of all the faces:</span>
<span class="s">            </span>
<span class="s">            rotate 1</span>
<span class="s">            fill 255,255,0</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // the three numbers indicate</span>
<span class="s">            // red green and blue values.</span>
<span class="s">            // You can also use color names such as &#39;indigo&#39;</span>
<span class="s">            // Try replacing the numbers with</span>
<span class="s">            // &#39;angleColor&#39;</span>
<span class="s">            // next-tutorial:stroke</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.strokeTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Graphics&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;stroke&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // &#39;stroke&#39; changes all the</span>
<span class="s">            // edges:</span>
<span class="s">            </span>
<span class="s">            rotate 1</span>
<span class="s">            strokeSize 5</span>
<span class="s">            stroke 255,255,255</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // the three numbers are RGB</span>
<span class="s">            // but you can also use the color names</span>
<span class="s">            // or the special color &#39;angleColor&#39;</span>
<span class="s">            // Also you can use &#39;strokeSize&#39;</span>
<span class="s">            // to specify the thickness.</span>
<span class="s">            // next-tutorial:color_names</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.colornamesTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Graphics&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;color by name&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // you can call colors by name</span>
<span class="s">            // try to un-comment one line:</span>
<span class="s">            //fill greenyellow</span>
<span class="s">            //fill indigo</span>
<span class="s">            //fill lemonchiffon // whaaaat?</span>
<span class="s">            </span>
<span class="s">            rotate 1</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // more color names here:</span>
<span class="s">            // http://html-color-codes.info/color-names/</span>
<span class="s">            // (just use them in lower case)</span>
<span class="s">            // next-tutorial:lights</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.lightsTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Graphics&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;lights&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // &#39;ambientLight&#39; creates an</span>
<span class="s">            // ambient light so things have</span>
<span class="s">            // some sort of shading:</span>
<span class="s">            </span>
<span class="s">            ambientLight 0,255,255</span>
<span class="s">            rotate time/1000</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // you can turn that light on and</span>
<span class="s">            // off while you build the scene</span>
<span class="s">            // by using &#39;lights&#39; and &#39;noLights&#39;</span>
<span class="s">            // next-tutorial:background</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.backgroundTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Graphics&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;background&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // &#39;background&#39; creates a</span>
<span class="s">            // solid background:</span>
<span class="s">            </span>
<span class="s">            background 0,0,255</span>
<span class="s">            rotate time/1000</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // next-tutorial:gradient</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.gradientTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Graphics&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;gradient&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // even nicer, you can paint a</span>
<span class="s">            // background gradient:</span>
<span class="s">            </span>
<span class="s">            simpleGradient color(190,10,10),color(30,90,100),color(0)</span>
<span class="s">            rotate time/1000</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // next-tutorial:line</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.lineTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Graphics&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;line&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // draw lines like this:</span>
<span class="s">            </span>
<span class="s">            20 times -&gt;</span>
<span class="s">            ▶rotate time/9000</span>
<span class="s">            ▶line</span>
<span class="s">            </span>
<span class="s">            // next-tutorial:ball</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.ballTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Graphics&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;ball&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // draw balls like this:</span>
<span class="s">            </span>
<span class="s">            ballDetail 10</span>
<span class="s">            3 times -&gt;</span>
<span class="s">            ▶move 0.2,0.2,0.2</span>
<span class="s">            ▶ball</span>
<span class="s">            </span>
<span class="s">            // (&#39;ballDetail&#39; is optional)</span>
<span class="s">            // next-tutorial:pushpopMatrix</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.pushpopMatrixTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Graphics&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;push and pop&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // pushMatrix creates a bookmark of</span>
<span class="s">            // the position, which you can</span>
<span class="s">            // return to later by using popMatrix.</span>
<span class="s">            // You can reset using &#39;resetMatrix&#39;.</span>
<span class="s">            </span>
<span class="s">            rotate time/1000</span>
<span class="s">            pushMatrix // bookmark the position after the rotation</span>
<span class="s">            line</span>
<span class="s">            move 0.5,0,0</span>
<span class="s">            line</span>
<span class="s">            popMatrix // go back to the bookmarked position</span>
<span class="s">            move -0.5,0,0</span>
<span class="s">            line</span>
<span class="s">            resetMatrix // resets the position</span>
<span class="s">            line // not affected by initial rotation</span>
<span class="s">            // next-tutorial:animation_style</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.animationstyleTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Graphics&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;animation style&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // try uncommenting either line</span>
<span class="s">            // with the animationStyle</span>
<span class="s">            </span>
<span class="s">            background 255</span>
<span class="s">            //animationStyle motionBlur</span>
<span class="s">            //animationStyle paintOver</span>
<span class="s">            rotate frame/10</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // next-tutorial:do_once</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.doonceTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Controlling the flow&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;do once&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // delete either check mark below</span>
<span class="s">            </span>
<span class="s">            rotate time/1000</span>
<span class="s">            ✓doOnce -&gt;</span>
<span class="s">            ▶background 255</span>
<span class="s">            ▶fill 255,0,0</span>
<span class="s">            ✓doOnce -&gt; ball</span>
<span class="s">            box</span>
<span class="s">            </span>
<span class="s">            // ...the line or block of code</span>
<span class="s">            // are ran one time only, after that the</span>
<span class="s">            // check marks immediately re-appear</span>
<span class="s">            // P.S. keep hitting the delete button</span>
<span class="s">            // on that first check mark for seizures.</span>
<span class="s">            // next-tutorial:conditionals</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.conditionalsTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Controlling the flow&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;conditionals&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // you can draw different things</span>
<span class="s">            // (or in general do different things)</span>
<span class="s">            // based on any</span>
<span class="s">            // test condition you want:</span>
<span class="s">            </span>
<span class="s">            rotate</span>
<span class="s">            if frame%3 == 0</span>
<span class="s">            ▶box</span>
<span class="s">            else if frame%3 == 1</span>
<span class="s">            ▶ball</span>
<span class="s">            else</span>
<span class="s">            ▶peg</span>
<span class="s">            </span>
<span class="s">            // next-tutorial:autocode</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
    <span class="vi">@programs.tutorials.autocodeTutorial =</span>
      <span class="nv">submenu: </span><span class="s">&quot;Others&quot;</span>
      <span class="nv">title: </span><span class="s">&quot;autocode&quot;</span>
      <span class="nv">code: </span><span class="s">&quot;&quot;&quot;</span>
<span class="s">            // the Autocode button invents random</span>
<span class="s">            // variations for you.</span>
<span class="s">            </span>
<span class="s">            // You can interrupt the Autocoder at</span>
<span class="s">            // any time by pressing the button again,</span>
<span class="s">            // or you can press CTRL-Z</span>
<span class="s">            // (or CMD-Z on Macs) to undo (or re-do) some of</span>
<span class="s">            // the steps even WHILE the autocoder is running,</span>
<span class="s">            // if you see that things got</span>
<span class="s">            // boring down a particular path of changes.</span>
<span class="s">            &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span>
  
  <span class="nv">loadDemoOrTutorial: </span><span class="nf">(demoName) -&gt;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">not</span> <span class="nx">Detector</span><span class="p">.</span><span class="nx">webgl</span> <span class="o">or</span> <span class="nx">@liveCodeLabCoreInstance</span><span class="p">.</span><span class="nx">threeJsSystem</span><span class="p">.</span><span class="nx">forceCanvasRenderer</span><span class="p">)</span> <span class="o">\</span>
        <span class="o">and</span> <span class="o">not</span> <span class="nx">userWarnedAboutWebglExamples</span> <span class="o">and</span> <span class="nx">demoName</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s">&quot;webgl&quot;</span><span class="p">)</span> <span class="o">is</span> <span class="mi">0</span>
      <span class="nv">userWarnedAboutWebglExamples = </span><span class="kc">true</span>
      <span class="nx">$</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="s">exampleNeedsWebgl&quot;</span><span class="p">).</span><span class="nx">modal</span><span class="p">()</span>
      <span class="nx">$</span><span class="p">(</span><span class="s">&quot;</span><span class="err">#</span><span class="s">simplemodal-container&quot;</span><span class="p">).</span><span class="nx">height</span> <span class="mi">200</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>set the demo as a hash state
so that ideally people can link directly to
a specific demo they like.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">@eventRouter</span><span class="p">.</span><span class="nx">trigger</span> <span class="s">&quot;set-url-hash&quot;</span><span class="p">,</span> <span class="s">&quot;bookmark=&quot;</span> <span class="o">+</span> <span class="nx">demoName</span>
    <span class="nx">@eventRouter</span><span class="p">.</span><span class="nx">trigger</span> <span class="s">&quot;big-cursor-hide&quot;</span>
    <span class="nx">@eventRouter</span><span class="p">.</span><span class="nx">trigger</span> <span class="s">&quot;editor-undim&quot;</span>
    <span class="vi">@liveCodeLabCoreInstance.graphicsCommands.doTheSpinThingy = </span><span class="kc">false</span>
    <span class="nv">prependMessage = </span><span class="s">&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">not</span> <span class="nx">Detector</span><span class="p">.</span><span class="nx">webgl</span> <span class="o">or</span> <span class="nx">@liveCodeLabCoreInstance</span><span class="p">.</span><span class="nx">threeJsSystem</span><span class="p">.</span><span class="nx">forceCanvasRenderer</span><span class="p">)</span> <span class="o">\</span>
        <span class="o">and</span> <span class="nx">demoName</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s">&quot;webgl&quot;</span><span class="p">)</span> <span class="o">is</span> <span class="mi">0</span>
      <span class="nv">prependMessage =</span>
      <span class="s">&quot;&quot;&quot;</span>
<span class="s">      // This drawing makes much more sense</span>
<span class="s">      // in a WebGL-enabled browser.</span>
<span class="s">      </span>
<span class="s">      </span>
<span class="s">      &quot;&quot;&quot;</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\u25B6/g</span><span class="p">,</span> <span class="s">&quot;\t&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Note that setting the value of the texteditor (texteditor.setValue below)
triggers the codeMirror onChange callback, which registers the new
code - so the next draw() will run the new demo code. But before doing
that will happen (when the timer for the next frame triggers), we'll
have cleared the screen with the code below.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="nx">@programs</span><span class="p">.</span><span class="nx">demos</span><span class="p">[</span><span class="nx">demoName</span><span class="p">]</span> <span class="o">||</span> <span class="nx">@programs</span><span class="p">.</span><span class="nx">tutorials</span><span class="p">[</span><span class="nx">demoName</span><span class="p">]</span>
      <span class="k">if</span> <span class="nx">@programs</span><span class="p">.</span><span class="nx">demos</span><span class="p">[</span><span class="nx">demoName</span><span class="p">]</span>
        <span class="nx">@texteditor</span><span class="p">.</span><span class="nx">setValue</span> <span class="nx">prependMessage</span> <span class="o">+</span> <span class="nx">@programs</span><span class="p">.</span><span class="nx">demos</span><span class="p">[</span><span class="nx">demoName</span><span class="p">].</span><span class="nx">code</span>
      <span class="k">else</span> <span class="k">if</span> <span class="nx">@programs</span><span class="p">.</span><span class="nx">tutorials</span><span class="p">[</span><span class="nx">demoName</span><span class="p">]</span>
        <span class="nx">@texteditor</span><span class="p">.</span><span class="nx">setValue</span> <span class="nx">prependMessage</span> <span class="o">+</span> <span class="nx">@programs</span><span class="p">.</span><span class="nx">tutorials</span><span class="p">[</span><span class="nx">demoName</span><span class="p">].</span><span class="nx">code</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>clear history. Why? Because we want to avoid the follwing:
user opens an example. User opens another example.
User performs undo. Result: previous example is open, but the hashtag
doesn't match the example. It's just confusing - we assume here that is
the user selects another tutorial and example then she is not expecting
the undo history to bring her back to previous demos/examples.
Note that, again, this is quite common in CodeMirror, the clearHistory
invokation below only works if slightly postponed. Not sure why.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">setTimeout</span><span class="p">((()</span><span class="o">=&gt;</span><span class="nx">@texteditor</span><span class="p">.</span><span class="nx">clearHistory</span><span class="p">()),</span><span class="mi">30</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>bring the cursor to the top</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">@texteditor</span><span class="p">.</span><span class="nx">setCursor</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>we want to avoid that the selected example
or tutorial when started paints over a screen with a previous drawing
of the previous code.
So basically we draw an empty frame.
  a) make sure that animationStyle is "normal"
  b) apply the potentially new animationStyle
  render the empty frame</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">blendControls = </span><span class="nx">@liveCodeLabCoreInstance</span><span class="p">.</span><span class="nx">blendControls</span>
    <span class="nx">blendControls</span><span class="p">.</span><span class="nx">animationStyle</span> <span class="nx">blendControls</span><span class="p">.</span><span class="nx">animationStyles</span><span class="p">.</span><span class="nx">normal</span>
    <span class="nx">blendControls</span><span class="p">.</span><span class="nx">animationStyleUpdateIfChanged</span><span class="p">()</span>
    <span class="nx">@liveCodeLabCoreInstance</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span> <span class="nx">@liveCodeLabCoreInstance</span><span class="p">.</span><span class="nx">graphicsCommands</span>

  <span class="nv">loadAppropriateDemoOrTutorialBasedOnHash: </span><span class="nf">(hash) -&gt;</span>
    <span class="nv">matched = </span><span class="nx">hash</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/bookmark=(.*)/</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="nx">matched</span>
      <span class="nx">@loadDemoOrTutorial</span> <span class="nx">matched</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>user in on the root page without any hashes</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">@texteditor</span><span class="p">.</span><span class="nx">setValue</span> <span class="s">&quot;&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>reset undo history</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">setTimeout</span><span class="p">((()</span><span class="o">=&gt;</span><span class="nx">@texteditor</span><span class="p">.</span><span class="nx">clearHistory</span><span class="p">()),</span><span class="mi">30</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>this paragraph from http://stackoverflow.com/a/629817
there are more elegant ways to track back/forward history
but they are more complex than this. I don't mind having a bit of
polling for this, not too big of a problem.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">pollHash: </span><span class="nf">-&gt;</span>
    <span class="k">if</span> <span class="nx">@lastHash</span> <span class="o">isnt</span> <span class="nx">location</span><span class="p">.</span><span class="nx">hash</span>
      <span class="vi">@lastHash = </span><span class="nx">location</span><span class="p">.</span><span class="nx">hash</span>
      </pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>hash has changed, so do stuff:</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">@loadAppropriateDemoOrTutorialBasedOnHash</span> <span class="nx">@lastHash</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 